Some pseudo code we walked through for rails 3